<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SP Tattoo Ink</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script type="module" src="https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js"></script>
<script type="module" src="https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js"></script>
<style>
body{box-sizing:border-box;}
.hero-bg{
    background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.7)), 
    url('https://images.unsplash.com/photo-1620215901051-0e4e9e10b23f?auto=format&fit=crop&w=1200&q=80');
    background-size:cover;
    background-position:center;
}
.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;}
.day{text-align:center;padding:10px;border-radius:6px;cursor:pointer;transition:0.2s;}
.day:hover{transform:scale(1.05);}
.selected{background-color:#3b82f6;color:white;}
.booked{background-color:#dc2626;color:white;cursor:not-allowed;opacity:0.6;}
.available{background-color:#10b981;color:white;}
</style>
</head>
<body class="bg-gray-900 text-white">

<!-- Navigation -->
<nav class="bg-black/90 backdrop-blur-sm fixed w-full z-50 border-b border-purple-500/20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <div class="flex items-center space-x-2">
                <span class="text-2xl bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent font-bold">‚ö°</span>
                <span class="text-xl font-bold">SP Tattoo Ink</span>
            </div>
            <div class="hidden md:flex space-x-8">
                <a href="#home" class="hover:text-purple-400 transition">Poƒçetna</a>
                <a href="#booking" class="hover:text-purple-400 transition">Zakazivanje</a>
                <a href="#contact" class="hover:text-purple-400 transition">Kontakt</a>
                <button onclick="showAdminLogin()" class="text-gray-400 hover:text-white transition">Admin</button>
            </div>
        </div>
    </div>
</nav>

<!-- Hero Section -->
<section id="home" class="hero-bg min-h-screen flex flex-col items-center justify-center text-center px-4">
    <h1 class="text-7xl md:text-9xl font-black mb-4 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">SP TATTOO INK</h1>
    <p class="text-xl md:text-2xl text-gray-200 mb-8">Profesionalni tattoo artisti - umetnost koja traje zauvek</p>
    <button onclick="document.getElementById('booking').scrollIntoView({behavior:'smooth'})" class="bg-gradient-to-r from-purple-600 to-pink-600 px-10 py-4 rounded-full font-bold hover:scale-105 transition transform">üé® Zaka≈æite Termin</button>
</section>

<!-- Booking Form -->
<section id="booking" class="py-16">
    <div class="max-w-4xl mx-auto px-6">
        <form id="bookingForm" class="bg-gray-900 rounded-lg p-8 space-y-6">
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <!-- Calendar -->
                    <div class="bg-gray-800 rounded-lg p-6 mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <button type="button" onclick="changeMonth(-1)" class="px-3 py-1 bg-purple-600 rounded">‚Äπ</button>
                            <span id="currentMonth" class="font-bold"></span>
                            <button type="button" onclick="changeMonth(1)" class="px-3 py-1 bg-purple-600 rounded">‚Ä∫</button>
                        </div>
                        <div class="calendar-grid mb-2">
                            <div>Ned</div><div>Pon</div><div>Uto</div><div>Sre</div><div>ƒået</div><div>Pet</div><div>Sub</div>
                        </div>
                        <div id="calendarDays" class="calendar-grid"></div>
                        <div class="flex justify-center space-x-4 mt-4 text-sm">
                            <div class="flex items-center space-x-1"><div class="w-4 h-4 bg-green-500 rounded"></div><span>Dostupno</span></div>
                            <div class="flex items-center space-x-1"><div class="w-4 h-4 bg-red-500 rounded"></div><span>Zauzeto</span></div>
                            <div class="flex items-center space-x-1"><div class="w-4 h-4 bg-blue-500 rounded"></div><span>Izabrano</span></div>
                        </div>
                    </div>
                    <input type="hidden" id="dateHidden" name="date">
                </div>

                <div>
                    <label class="block mb-2">Ime</label>
                    <input type="text" id="firstName" required class="w-full bg-gray-800 border border-gray-600 rounded px-4 py-2">
                    <label class="block mt-4 mb-2">Prezime</label>
                    <input type="text" id="lastName" required class="w-full bg-gray-800 border border-gray-600 rounded px-4 py-2">
                    <label class="block mt-4 mb-2">Telefon</label>
                    <input type="tel" id="phone" required class="w-full bg-gray-800 border border-gray-600 rounded px-4 py-2">
                    <label class="block mt-4 mb-2">Email</label>
                    <input type="email" id="email" required class="w-full bg-gray-800 border border-gray-600 rounded px-4 py-2">
                    <label class="block mt-4 mb-2">Opis tetova≈æe</label>
                    <textarea id="description" required rows="4" class="w-full bg-gray-800 border border-gray-600 rounded px-4 py-2" placeholder="Opi≈°ite tetova≈æu"></textarea>
                </div>
            </div>

            <button type="submit" class="w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded font-bold hover:scale-105 transition transform">Po≈°aljite Zahtev</button>
        </form>
    </div>
</section>

<!-- Success Modal -->
<div id="successModal" class="fixed inset-0 bg-black/80 hidden z-50 flex items-center justify-center">
    <div class="bg-gray-900 rounded-lg p-8 max-w-md w-full mx-4 border border-green-500/20 text-center">
        <div class="w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4">‚úì</div>
        <h3 class="text-2xl font-bold mb-4 text-green-400">Zahtev Poslat!</h3>
        <p class="text-gray-300 mb-6">Va≈° zahtev za termin je uspe≈°no poslat. Kontaktiraƒáemo vas uskoro.</p>
        <button onclick="hideSuccessModal()" class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded-lg font-semibold">U redu</button>
    </div>
</div>

<!-- Admin Modal -->
<div id="adminModal" class="fixed inset-0 bg-black/80 hidden z-50 flex items-center justify-center">
    <div class="bg-gray-900 rounded-lg p-8 max-w-md w-full mx-4 border border-purple-500/20">
        <h3 class="text-2xl font-bold mb-6 text-center">Admin Prijava</h3>
        <form id="adminLoginForm" class="space-y-4">
            <input type="text" id="adminUsername" placeholder="Korisniƒçko ime" class="w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded" required>
            <input type="password" id="adminPassword" placeholder="≈†ifra" class="w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded" required>
            <div class="flex space-x-4">
                <button type="submit" class="flex-1 bg-purple-600 py-2 rounded hover:bg-purple-700">Prijavite se</button
                     <button type="button" onclick="hideAdminLogin()" class="flex-1 bg-gray-700 py-2 rounded hover:bg-gray-600">Otka≈æi</button>
            </div>
        </form>
        <div id="adminPanel" class="hidden mt-6">
            <h4 class="text-xl font-bold mb-4">Zauzeti termini</h4>
            <ul id="bookingsList" class="space-y-2 max-h-64 overflow-y-auto"></ul>
        </div>
    </div>
</div>

<!-- Info Section -->
<section id="contact" class="bg-gray-800 py-12 mt-12">
    <div class="max-w-4xl mx-auto px-6 text-center space-y-4">
        <h2 class="text-3xl font-bold mb-4">Kontakt & Lokacija</h2>
        <p>üìç Adresa: Ulica 12, Grad, Srbija</p>
        <p>‚è∞ Radno vreme: Pon-Pet 10:00 - 20:00, Sub 10:00 - 15:00</p>
        <p>üì± WhatsApp: ‚Ä™+381631465807‚Ä¨</p>
        <p>üì∏ Instagram: <a href="https://instagram.com/sp.tattoo20" target="_blank" class="text-purple-400 hover:text-purple-600">@sp.tattoo20</a></p>
    </div>
</section>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, query } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyDmCJL8QSAifNUMib_KZ4jj14bLaAELaTU",
  authDomain: "adminsptattoo.firebaseapp.com",
  projectId: "adminsptattoo",
  storageBucket: "adminsptattoo.firebasestorage.app",
  messagingSenderId: "1027852466595",
  appId: "1:1027852466595:web:d72de0c7530ab1eaa80216",
  measurementId: "G-SSB68E76L1"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// EmailJS Init
emailjs.init("jqIOVZLJJvDFs6I2d");

// Booking form submission
const bookingForm = document.getElementById('bookingForm');
bookingForm.addEventListener('submit', async (e)=>{
    e.preventDefault();
    const data = {
        firstName: document.getElementById('firstName').value,
        lastName: document.getElementById('lastName').value,
        phone: document.getElementById('phone').value,
        email: document.getElementById('email').value,
        description: document.getElementById('description').value,
        date: document.getElementById('dateHidden').value
    };
    try{
        await addDoc(collection(db,'bookings'),data);
        emailjs.send('service_sptattoo','template_sptattoo',data);
        showSuccessModal();
        bookingForm.reset();
        renderCalendar();
    }catch(err){console.error(err);}
});

// Success Modal
function showSuccessModal(){document.getElementById('successModal').classList.remove('hidden');}
function hideSuccessModal(){document.getElementById('successModal').classList.add('hidden');}

// Admin login
function showAdminLogin(){document.getElementById('adminModal').classList.remove('hidden');}
function hideAdminLogin(){document.getElementById('adminModal').classList.add('hidden');}

document.getElementById('adminLoginForm').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const user = document.getElementById('adminUsername').value;
    const pass = document.getElementById('adminPassword').value;
    if(user==='admin' && pass==='sp2024'){
        document.getElementById('adminPanel').classList.remove('hidden');
        loadBookings();
    } else { alert('Pogre≈°no korisniƒçko ime ili ≈°ifra'); }
});

// Load bookings for admin
async function loadBookings(){
    const q = query(collection(db,'bookings'));
    const snapshot = await getDocs(q);
    const list = document.getElementById('bookingsList');
    list.innerHTML='';
    snapshot.forEach(doc=>{
        const li = document.createElement('li');
        li.className='bg-gray-700 p-2 rounded';
        li.textContent = ${doc.data().date} - ${doc.data().firstName} ${doc.data().lastName} (${doc.data().phone});
        list.appendChild(li);
    });
}

// Calendar
let today = new Date();
let selectedDate=null;

function renderCalendar(){
    const monthNames=['Januar','Februar','Mart','April','Maj','Jun','Jul','Avgust','Septembar','Oktobar','Novembar','Decembar'];
    const month = today.getMonth();
    const year = today.getFullYear();
    document.getElementById('currentMonth').textContent=${monthNames[month]} ${year};

    const firstDay = new Date(year,month,1).getDay();
    const daysInMonth = new Date(year,month+1,0).getDate();
    const calendarDays = document.getElementById('calendarDays');
    calendarDays.innerHTML='';
    const snapshot = await getDocs(collection(db,'bookings'));
    let bookedDates = snapshot.docs.map(doc=>doc.data().date);

    for(let i=0;i<firstDay;i++){calendarDays.innerHTML+='<div></div>';}
    for(let d=1;d<=daysInMonth;d++){
        const dateStr=${year}-${String(month+1).padStart(2,'0')}-${String(d).padStart(2,'0')};
        const dayDiv=document.createElement('div');
        dayDiv.textContent=d;
        dayDiv.className='day';
        if(bookedDates.includes(dateStr)){dayDiv.classList.add('booked');}
        else{dayDiv.classList.add('available');}
        dayDiv.addEventListener('click',()=>{
            if(dayDiv.classList.contains('booked')) return;
            selectedDate=dateStr;
            document.getElementById('dateHidden').value=dateStr;
            document.querySelectorAll('.day').forEach(el=>el.classList.remove('selected'));
            dayDiv.classList.add('selected');
        });
        calendarDays.appendChild(dayDiv);
    }
}

function changeMonth(delta){today.setMonth(today.getMonth()+delta); renderCalendar();}
renderCalendar();
</script>

</body>
</html>                                                                                               
